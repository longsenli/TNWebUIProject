<!DOCTYPE html>
<html>

	<head>

		<title>上传图片</title>
		<meta charset="UTF-8">
		<style>
			@media screen {
				#canvas {
					display: block;
				}
				#image {
					display: none;
				}
			}
			
			@media print {
				#canvas {
					display: none;
				}
				#image {
					display: block;
				}
			}
		</style>
		<script type="text/javascript" src="../../vendor/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="../../vendor/jquery/jquery.cookie.js"></script>
		<script type="text/javascript" src="../../vendor/jquery/jquery.jqprint-0.3.js"></script>
		<script type="text/javascript" src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../../vendor/boostrap-select/bootstrap-select.min.js"></script>
		<script type="text/javascript" src="../../vendor/bootstrap-datatable/bootstrap-table.js"></script>
		<script type="text/javascript" src="../../js/common.js"></script>
		<script type="text/javascript" src="../../js/workOrderJS/subOrder.js"></script>

		<script type="text/javascript" src="../../vendor/bootstrap-datatable/bootstrap-table-zh-CN.js"></script>
		<script type="text/javascript" src="../../js/basicinfo/basicinfo.js"></script>
		<script type="text/javascript" src="../../vendor/qrcode/jquery.qrcode.js"></script>
		<script type="text/javascript" src="../../vendor/qrcode/qrcode.js"></script>
		<script type="text/javascript" src="../../vendor/qrcode/qrscan.js"></script>

		<link rel="stylesheet" type="text/css" href="../../vendor/bootstrap/css/bootstrap.min.css" media="screen">
		<link rel="stylesheet" type="text/css" href="../../vendor/boostrap-select/bootstrap-select.min.css" media="screen">
		<link rel="stylesheet" type="text/css" href="../../vendor/bootstrap-datatable/bootstrap-table.css" media="screen">

	</head>

	<body>

		<div>
			<input type="file" id="pictureName" name="pictureName" style="display: inline-block;" value="图片" accept="image/*">
					<button id="getUsableMaterialBT" type="button" class="btn btn-default" onclick="test()">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>查询
            </button>
		</div>
		<script type="text/javascript">
			function test() {
				var getObjectURL = function(file) {               
					var url = null;      
					if(window.createObjectURL != undefined) { // basic              
						url = window.createObjectURL(file);                
					} else if(window.URL != undefined) { // mozilla(firefox)
						url = window.URL.createObjectURL(file);
					} else if(window.webkitURL != undefined) { // webkit or chrome
						          
						url = window.webkitURL.createObjectURL(file);                
					}           
					return url;                 
				}    
				var temp = $("#pictureName").get(0).files[0];        
				console.log(getObjectURL(temp)); // newfile[0]是通过input file上传的二维码图片文件    
				qrcode.decode(getObjectURL(temp));             
				qrcode.callback = function(imgMsg) {                  
					console.log("imgMsg", imgMsg);                
				}
			}
		</script>

	</body>

</html>